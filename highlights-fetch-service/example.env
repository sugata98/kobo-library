# KoboSync bucket (read-only for database syncing)
B2_APPLICATION_KEY_ID=your_key_id
B2_APPLICATION_KEY=your_key
B2_BUCKET_NAME=your_bucket_name

# Covers bucket (read-write for cover caching) - OPTIONAL
# If not set, will use main bucket above
B2_COVERS_APPLICATION_KEY_ID=your_covers_key_id
B2_COVERS_APPLICATION_KEY=your_covers_key
B2_COVERS_BUCKET_NAME=kobo-covers

LOCAL_DB_PATH=/tmp/KoboReader.sqlite

# CORS Configuration (comma-separated list of allowed origins)
# For production: FRONTEND_URL=https://readr.space,https://www.readr.space
# For local development: Leave unset or use "*"
# FRONTEND_URL=*

# Authentication Settings (⚠️  CRITICAL: Change ALL values before deploying!)
AUTH_ENABLED=true
AUTH_USERNAME=your-username
AUTH_PASSWORD=your-secure-password

# JWT_SECRET_KEY: MUST be at least 32 characters for security
# ⚠️  DO NOT use the placeholder value below - it will fail validation!
# Generate secure key: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=REPLACE_WITH_SECURE_RANDOM_STRING
JWT_ALGORITHM=HS256

# JWT_ACCESS_TOKEN_EXPIRE_MINUTES: Token expiry in minutes
# Shorter expiry = better security if token is compromised
# Options:
#   - 1440 (1 day) - Most secure, users login daily
#   - 10080 (7 days) - Recommended balance of security and convenience
#   - 43200 (30 days) - Maximum allowed, suitable for personal single-user apps only
# Note: Compromised tokens remain valid until expiry. Consider implementing refresh tokens for production.
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 days (recommended default)

# Cookie Configuration
# COOKIE_SECURE: Set to true for production (HTTPS), false for local development
# COOKIE_SAMESITE: "lax" is secure and works with subdomains when domain is set to parent domain
# COOKIE_DOMAIN: Set to parent domain (e.g., ".readr.space") to share cookies across subdomains
#                Leave empty for local development
COOKIE_SECURE=true
COOKIE_SAMESITE=lax
COOKIE_DOMAIN=.readr.space  # Use ".example.com" (with leading dot) to share across subdomains

# ========================================
# Kobo AI Companion (OPTIONAL)
# ========================================
# Enable this feature to get AI-powered insights on your Kobo highlights via Telegram
# Your Kobo device sends highlights to the API, which posts to Telegram with AI analysis

# TELEGRAM_ENABLED: Set to true to enable the Kobo AI Companion feature
TELEGRAM_ENABLED=false

# KOBO_API_KEY: Create a secure random string for authenticating Kobo device requests
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Your Kobo device must send this in the X-API-Key header
# KOBO_API_KEY=your-secure-api-key-here

# TELEGRAM_BOT_TOKEN: Get this from @BotFather on Telegram
# 1. Open Telegram and search for @BotFather
# 2. Send /newbot and follow the instructions
# 3. Copy the token provided (format: 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11)
# TELEGRAM_BOT_TOKEN=your-telegram-bot-token-here

# TELEGRAM_CHAT_ID: The chat/group ID where highlights will be sent
# To get your chat ID:
# 1. Add your bot to a group or send it a message
# 2. Visit: https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
# 3. Look for "chat":{"id":123456789} in the response
# 4. Use that number (can be negative for groups)
# TELEGRAM_CHAT_ID=-1001234567890

# TELEGRAM_WEBHOOK_URL: Your public Render.com URL (required for webhooks)
# Format: https://your-app-name.onrender.com (no trailing slash)
# The webhook endpoint will be: https://your-app-name.onrender.com/telegram-webhook
# TELEGRAM_WEBHOOK_URL=https://your-app-name.onrender.com

# GEMINI_API_KEY: Get this from Google AI Studio (https://makersuite.google.com/app/apikey)
# 1. Visit https://makersuite.google.com/app/apikey
# 2. Click "Create API Key"
# 3. Copy the generated key
# GEMINI_API_KEY=your-gemini-api-key-here

# GEMINI_MODEL: The Gemini model to use for text analysis (default: gemini-3-flash-preview)
# Options:
#   - gemini-3-flash-preview (newest, fastest, most capable - RECOMMENDED)
#   - gemini-2.0-flash-exp (stable, fast, very capable)
#   - gemini-1.5-flash (stable, fast, cost-effective)
#   - gemini-1.5-pro (more capable, slower)
GEMINI_MODEL=gemini-3-flash-preview

# GEMINI_IMAGE_MODEL: The model to use for diagram/image generation (optional)
# Set to empty string or don't set to disable diagram generation
# 
# Two approaches available:
# 
# 1. Direct Image Generation (photorealistic/artistic):
#    GEMINI_IMAGE_MODEL=gemini-2.5-flash-image
#    - Uses Gemini 2.5 Flash Image for direct image generation
#    - Best for: Artistic visualizations, character art, creative images
#    - Generates actual images directly
# 
# 2. Technical Diagram Generation (recommended for engineering books):
#    GEMINI_IMAGE_MODEL=gemini-3-flash-preview
#    - Generates Mermaid code, then converts to PNG via mermaid.ink
#    - Best for: Flowcharts, system architectures, data structures, algorithms
#    - Clean, professional technical diagrams
# 
# Recommendation: Use gemini-3-flash-preview for technical/engineering books
GEMINI_IMAGE_MODEL=gemini-3-flash-preview
